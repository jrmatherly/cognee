#% if cognee_enabled | default(false) %#
#|
  This is a SOPS-encrypted secret template.
  In production, encrypt this file using:
    sops --encrypt --age <AGE_PUBLIC_KEY> secret.sops.yaml > secret.sops.yaml.enc
|#
---
apiVersion: v1
kind: Secret
metadata:
  name: cognee-secrets
  namespace: #{ cognee_namespace | default('ai-system') }#
  labels:
    app.kubernetes.io/name: cognee
    app.kubernetes.io/part-of: cognee
type: Opaque
stringData:
  # Database credentials
  DB_PASSWORD: "#{ cognee_db_password }#"

  # Neo4j Graph Database
  GRAPH_DATABASE_PASSWORD: "#{ cognee_neo4j_password }#"

  # LLM API Key (LiteLLM master key)
  LLM_API_KEY: "#{ cognee_litellm_api_key | default(litellm_master_key) }#"

  #############################################################################
  # JWT Security (REQUIRED - v0.5.2+)
  # Generate secrets with: python -c "import secrets; print(secrets.token_urlsafe(64))"
  # These must be at least 32 characters and NOT weak defaults like "super_secret"
  #############################################################################
  FASTAPI_USERS_JWT_SECRET: "#{ cognee_jwt_secret }#"
  FASTAPI_USERS_RESET_PASSWORD_TOKEN_SECRET: "#{ cognee_reset_password_token_secret | default(cognee_jwt_secret) }#"
  FASTAPI_USERS_VERIFICATION_TOKEN_SECRET: "#{ cognee_verification_token_secret | default(cognee_jwt_secret) }#"

  #############################################################################
  # OIDC/Keycloak Authentication (Optional - set if OIDC enabled)
  #############################################################################
  OIDC_CLIENT_ID: "#{ cognee_oidc_client_id | default('') }#"
  OIDC_CLIENT_SECRET: "#{ cognee_oidc_client_secret | default('') }#"

  # Auth0 Configuration (Legacy - kept for backward compatibility)
  AUTH0_DOMAIN: "#{ cognee_auth0_domain | default('') }#"
  AUTH0_CLIENT_ID: "#{ cognee_auth0_client_id | default('') }#"
  AUTH0_CLIENT_SECRET: "#{ cognee_auth0_client_secret | default('') }#"
  AUTH0_SECRET: "#{ cognee_auth0_secret | default('') }#"
#% endif %#
